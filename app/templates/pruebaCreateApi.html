<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <script
      src="https://code.jquery.com/jquery-3.5.0.js"
      integrity="sha256-r/AaFHrszJtwpe+tHyNi/XCfMxYpbsRg2Uqn0x3s2zc="
      crossorigin="anonymous"
    ></script>

    <script>
      $(document).ready(function () {
        $.ajax({
          url: "http://127.0.0.1:80/annotations",
          dataType: "json",
          type: "post",
          contentType: "application/json",
          data: JSON.stringify({
            ranges: [
              {
                start: "/p[2]",
                startOffset: 118,
                end: "/p[2]",
                endOffset: 422,
              },
            ],
            quote:
              "tam rem aperiam, eaque ipsa quae ab\n        illo inventore veritatis et quasi architecto beatae vitae dicta sunt\n        explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut\n        odit aut fugit, sed quia consequuntur magni dolores eos qui ratione\n        voluptatem sequi nesciunt. N",
            text: "mi nueva nota cargada 987",
            tags: [],
            uri: "http://127.0.0.1:8000/",
          }),
          processData: false,
          success: function (data, textStatus, jQxhr) {
            $("#response pre").html(JSON.stringify(data));
          },
          error: function (jqXhr, textStatus, errorThrown) {
            console.log(errorThrown);
          },
        });

        /*
              var url = "http://127.0.0.1:8000/annotations";

              var xhr = new XMLHttpRequest();
              xhr.open("POST", url);

              xhr.setRequestHeader("Content-Type", "application/json");
              xhr.setRequestHeader("Accept", "application/json");

              xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                  console.log(xhr.status);
                  console.log(xhr.responseText);
                }
              };

              var data = {
                ranges: [
                  { start: "/p[2]", startOffset: 118, end: "/p[2]", endOffset: 422 },
                ],
                quote:
                  "tam rem aperiam, eaque ipsa quae ab\n        illo inventore veritatis et quasi architecto beatae vitae dicta sunt\n        explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut\n        odit aut fugit, sed quia consequuntur magni dolores eos qui ratione\n        voluptatem sequi nesciunt. N",
                text: "mi nueva nota cargada 20777",
                tags: [],
                uri: "http://127.0.0.1:80/",
              };*/

        //xhr.send(data);
        //xhr.send(JSON.stringify(data));
      });
    </script>
  </head>

  <body>
    <p id="test">Agregamos una nota con javascript</p>
  </body>
</html>
